# Enterprise Bulk Upload System Environment Configuration
# Version: 2.0.0
# Environment: Development

# ============================================
# DATABASE CONFIGURATION
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mangalm_sales
DB_USER=postgres
DB_PASSWORD=postgres_dev_2024
DB_SCHEMA=bulk_upload

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000
DB_STATEMENT_TIMEOUT=60000

# SSL/TLS (for production)
DB_SSL=false
# DB_SSL_CA=/path/to/ca.pem
# DB_SSL_CERT=/path/to/cert.pem
# DB_SSL_KEY=/path/to/key.pem

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_dev_2024
REDIS_DB=0

# Redis Settings
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=20000
REDIS_COMMAND_TIMEOUT=5000
REDIS_KEEP_ALIVE=30000

# Redis TLS (for production)
REDIS_TLS=false
# REDIS_TLS_CA=/path/to/ca.pem
# REDIS_TLS_CERT=/path/to/cert.pem
# REDIS_TLS_KEY=/path/to/key.pem

# ============================================
# QUEUE CONFIGURATION (Bull)
# ============================================
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3
QUEUE_RETRY_DELAY=2000
QUEUE_BACKOFF_TYPE=exponential
QUEUE_REMOVE_ON_COMPLETE=100
QUEUE_REMOVE_ON_FAIL=500

# Queue Names
QUEUE_UPLOAD_NAME=bulk-upload-queue
QUEUE_PROCESSING_NAME=processing-queue
QUEUE_VALIDATION_NAME=validation-queue
QUEUE_NOTIFICATION_NAME=notification-queue

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
UPLOAD_DIR=./uploads
UPLOAD_TEMP_DIR=./uploads/temp
UPLOAD_PROCESSED_DIR=./uploads/processed
UPLOAD_FAILED_DIR=./uploads/failed

# Size Limits
UPLOAD_MAX_FILE_SIZE=104857600 # 100MB
UPLOAD_CHUNK_SIZE=1048576 # 1MB
UPLOAD_MAX_CHUNK_SIZE=10485760 # 10MB

# File Types
UPLOAD_ALLOWED_TYPES=csv,xlsx,xls,json,xml
UPLOAD_ALLOWED_MIMES=text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/json,text/xml

# Processing
UPLOAD_BATCH_SIZE=1000
UPLOAD_PARALLEL_CHUNKS=4
UPLOAD_STREAM_HIGH_WATER_MARK=65536 # 64KB

# ============================================
# PERFORMANCE CONFIGURATION
# ============================================
PERF_TARGET_ROWS_PER_SECOND=5000
PERF_MAX_MEMORY_MB=512
PERF_CPU_THRESHOLD=80
PERF_ENABLE_PROFILING=false

# ============================================
# MONITORING CONFIGURATION
# ============================================
MONITORING_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3200
METRICS_INTERVAL=10000 # 10 seconds

# ============================================
# OBJECT STORAGE (MinIO)
# ============================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minio_admin
MINIO_SECRET_KEY=minio_dev_2024
MINIO_USE_SSL=false
MINIO_BUCKET=bulk-uploads
MINIO_REGION=us-east-1

# ============================================
# SECURITY CONFIGURATION
# ============================================
# JWT
JWT_SECRET=enterprise_bulk_upload_jwt_secret_2024
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=enterprise_bulk_upload_refresh_secret_2024
JWT_REFRESH_EXPIRES_IN=7d

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000 # 1 minute
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_UPLOAD_MAX=10

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ============================================
# API CONFIGURATION
# ============================================
API_HOST=0.0.0.0
API_PORT=3000
API_BASE_URL=http://localhost:3000
API_VERSION=v2
API_PREFIX=/api/v2

# ============================================
# SSE (Server-Sent Events)
# ============================================
SSE_HEARTBEAT_INTERVAL=30000 # 30 seconds
SSE_CLIENT_TIMEOUT=120000 # 2 minutes

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_DIR=./logs
LOG_FILE_MAX_SIZE=10485760 # 10MB
LOG_FILE_MAX_FILES=10
LOG_ERROR_FILE=error.log
LOG_COMBINED_FILE=combined.log

# ============================================
# AUDIT CONFIGURATION
# ============================================
AUDIT_ENABLED=true
AUDIT_LOG_ALL_ACTIONS=true
AUDIT_RETENTION_DAYS=90

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_DEDUPLICATION=true
FEATURE_PARALLEL_PROCESSING=true
FEATURE_AUTO_RETRY=true
FEATURE_COMPRESSION=true
FEATURE_ENCRYPTION=false
FEATURE_WEBHOOK_NOTIFICATIONS=true

# ============================================
# ERROR HANDLING
# ============================================
ERROR_MAX_RETRIES=3
ERROR_RETRY_DELAY=1000
ERROR_EXPONENTIAL_BACKOFF=true
ERROR_CIRCUIT_BREAKER_THRESHOLD=5
ERROR_CIRCUIT_BREAKER_TIMEOUT=60000

# ============================================
# CLEANUP CONFIGURATION
# ============================================
CLEANUP_ENABLED=true
CLEANUP_INTERVAL=86400000 # 24 hours
CLEANUP_MAX_AGE_DAYS=30
CLEANUP_FAILED_FILES_DAYS=7

# ============================================
# NOTIFICATION CONFIGURATION
# ============================================
NOTIFICATION_ENABLED=true
NOTIFICATION_EMAIL_ENABLED=false
NOTIFICATION_WEBHOOK_ENABLED=true
NOTIFICATION_WEBHOOK_URL=http://localhost:3000/webhooks/upload-status

# Email Settings (when enabled)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=notifications@mangalm.com
# SMTP_PASSWORD=smtp_password
# SMTP_FROM=Mangalm Bulk Upload <notifications@mangalm.com>

# ============================================
# DEVELOPMENT SETTINGS
# ============================================
NODE_ENV=development
DEBUG=bulk-upload:*
FORCE_COLOR=1